<style type="text/css">
.calendar {
	position: relative;
	display: inline-block;
	width: 250px;
	height: 280px;
	padding: 18px;
	text-align: center;
	overflow: hidden;
	box-sizing: border-box;
	box-shadow: 1px 1px 8px rgba(79, 195, 247, 0.3);
}
.calendar .sat {
	color: #1565c0;
}
.calendar .sun {
	color: #d50000;
}

.m-calendar .calendar > .btn {
	position: absolute;
	top: 10px;
	width: 30px;
	height: 30px;
	margin: 0px 5px;
	background-color: #81d4fa;
	border: none;
	border-radius: 30px;
	cursor: pointer;
}
.m-calendar .calendar > .btn.prev {
	left: 10px;
}
.m-calendar .calendar > .btn.prev::before {
	content: '\003c';
	color: #fff;
}
.m-calendar .calendar > .btn.next {
	right: 10px;
}
.m-calendar .calendar > .btn.next::after {
	content: '\003e';
	color: #fff;
}
.m-calendar > .calendar > .days {
	display: inline-block;
	margin: 10px auto 0px;
	padding: 0px;
}
.m-calendar > .calendar > .days > li {
	width: 30px;
	height: 30px;
	display: block;
	float: left;
	text-align: center;
	line-height: 30px;
	font-size: 12px;
}
.m-calendar > .calendar > .dates {
	display: inline-block;
	margin: 0px auto;
	padding: 0px;
}
.m-calendar > .calendar > .dates > div {
	width: 30px;
	height: 30px;
	display: block;
	margin: 0px;
	padding: 0px;
	float: left;
	text-align: center;
	line-height: 30px;
	font-size: 12px;
	list-style: none;
	border-radius: 30px;
	cursor: pointer;
}
.m-calendar > .calendar > .dates > div.selected {
	color: #fff;
	background-color: #81d4fa;
}
</style>
<div id="since"></div>
<div id="until"></div>

<script type="text/javascript">
class Calendar {
    
	constructor (id) {
        this._self = document.getElementById(id);
		this._showingDate = new Date();
        this._onSetDateCallback = null;
		this._selectedDate = new Date();
		
        this.mount();
    }

    mount () {
        this._self.className = 'm-calendar';
        this._self.appendChild(this.createCalendar());
		
		this.render();
    }

	callSetDateCallback () {
		if (typeof this._onSetDateCallback !== 'function')
			return;

		this._onSetDateCallback(this._selectedDate);
	}

    get isSameYearMonth () {
		if (! this._selectedDate)
			return false;

        return this._selectedDate.getFullYear() == this._showingDate.getFullYear()
			&& this._selectedDate.getMonth() == this._showingDate.getMonth();
    }

    createCalendar () {
        let calendar = document.createElement('div');

        calendar.className = 'calendar';
        calendar.innerHTML = `
			<button class="btn prev"></button>
            <button class="btn next"></button>
			<span class="year"></span>
            <span class="month"></span>
            <ul class="days">
                <li class="sun">일</li>
                <li>월</li>
                <li>화</li>
                <li>수</li>
                <li>목</li>
                <li>금</li>
                <li class="sat">토</li>
            </ul>
            <div class="dates"></div>
        `;

		calendar.addEventListener('click', e => {
            const btn = e.target.closest('button');

            if (! btn) return false;
			
			let showingDate = new Date(+this._showingDate);

            if (btn.className.indexOf('prev') != -1) {
                showingDate.setMonth(showingDate.getMonth() - 1);
            } else {    
                showingDate.setMonth(showingDate.getMonth() + 1);
            }

			this.showingDate = showingDate;
        });	

		calendar.querySelector('.dates').addEventListener('click', (e) => {
            if (e.target.closest('.date')) {
                this._selectedDate.setFullYear(this._showingDate.getFullYear());
                this._selectedDate.setMonth(this._showingDate.getMonth());
                this._selectedDate.setDate(e.target.dataset.date);
                
				this.patch();
				this.callSetDateCallback();
            }
		});

		this._year = calendar.querySelector('.year');
		this._month = calendar.querySelector('.month');
		this._dates = calendar.querySelector('.dates');

        return calendar;
    }

	patch () {
		this._dates.querySelectorAll('.date').forEach((item) => {
			if (this.isSameYearMonth && item.dataset.date == this._selectedDate.getDate()) {
				if (item.className.indexOf('selected') == -1)
					item.className = item.className.concat(' ', 'selected');
			} else {
				item.className = item.className.replace(/\s*selected/, '');
			}	
		});
	}

	render () {
		const sameYearMonth = this.isSameYearMonth;
		const firstDate = new Date(this._showingDate.getFullYear(), this._showingDate.getMonth(), 1);
        const lastDate = new Date(this._showingDate.getFullYear(), this._showingDate.getMonth() + 1, 0);
		let dateHTML = '';

		this._year.innerText = `${ this._showingDate.getFullYear() }년`;
        this._month.innerText = `${ this._showingDate.getMonth() + 1}월`;
		
		for (let i = 0; i < firstDate.getDay(); i += 1) {
			dateHTML += `<div></div>`;
		}
		
		for (let i = 1; i <= lastDate.getDate(); i += 1) {
			let dayOfWeek = ['date'];
			
			if ((firstDate.getDay() + i) % 7 == 1) dayOfWeek.push('sun');
			if ((firstDate.getDay() + i) % 7 == 0) dayOfWeek.push('sat');
            
            if (sameYearMonth && this._selectedDate.getDate() == i) {
                dayOfWeek.push('selected');
            }
			
			dateHTML += `<div class="${ dayOfWeek.join(' ') }" data-date="${ i }">${ i }</div>`;
		}

		this._dates.innerHTML = dateHTML;
	}

    setDate (date, reRender = true) {
		if (! date)
			return this;
		
		this._selectedDate = new Date(date);

		if (! reRender) {
			this.patch();
		} else {
			this.showingDate = new Date(date);
		}
		
		this.callSetDateCallback();

		return this;
    }

	set showingDate (value) {
		this._showingDate = value;
		this.render();
	}

    onSetDate (callback) {
        this._onSetDateCallback = callback;
        return this;
    }
}

(() => {
	const sinceCalendar = new Calendar('since');

    sinceCalendar.onSetDate(selectedDate => {
        console.log(selectedDate);
    });
	
}) ();
</script>