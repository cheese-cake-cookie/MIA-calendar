<div id="since"></div>

<!-- <div class="calendar">
    <div class="picker">
        <button class="btn prev"></button>
        <div class="year">2020</div>
        <div class="month">06</div>
        <button class="btn next"></button>
    </div>
    <ul class="years">
        <li>2009</li>
        <li>2010</li>
        <li>2011</li>
        <li>2012</li>
        <li>2013</li>
        <li>2014</li>
        <li>2015</li>
        <li>2016</li>
        <li>2017</li>
        <li>2018</li>
        <li>2019</li>
        <li class="selected">2020</li>
    </ul>
    <ul class="months">
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
        <li class="selected">6</li>
        <li>7</li>
        <li>8</li>
        <li>9</li>
        <li>10</li>
        <li>11</li>
        <li>12</li>
    </ul>
    <ul class="days">
        <li class="sun">일</li>
        <li>월</li>
        <li>화</li>
        <li>수</li>
        <li>목</li>
        <li>금</li>
        <li class="sat">토</li>
    </ul>
    <ul class="dates">
        <li class="date sun"></li>
        <li class="date">1</li>
        <li class="date">2</li>
        <li class="date today">3</li>
        <li class="date">4</li>
        <li class="date">5</li>
        <li class="date sat">6</li>
        <li class="date sun">7</li>
        <li class="date">8</li>
        <li class="date">9</li>
        <li class="date">10</li>
        <li class="date">11</li>
        <li class="date">12</li>
        <li class="date sat">13</li>
        <li class="date sun">14</li>
        <li class="date">15</li>
        <li class="date">16</li>
        <li class="date">17</li>
        <li class="date">18</li>
        <li class="date">19</li>
        <li class="date sat">20</li>
        <li class="date sun">21</li>
        <li class="date">22</li>
        <li class="date">23</li>
        <li class="date">24</li>
        <li class="date">25</li>
        <li class="date">26</li>
        <li class="date sat">27</li>
        <li class="date sun">28</li>
        <li class="date">29</li>
        <li class="date">30</li>
    </ul>
</div> -->
<script type="text/javascript">
class Calendar  {
    constructor (id) {
        this._self = document.getElementById(id);
        
        this.render();
        this.currentDate = new Date();
    }

    get currentDate () {
        return this._currentDate;
    }

    set currentDate (value) {
        this._currentDate = value;
        this.setPicker();
        this.drawCalendar();
    }

    render () {
        this._self.className = 'm-calendar';

        const fragment = document.createDocumentFragment();
        
        this._picker = this.createPicker();
        this._calendar = this.createCalendar();

        fragment.appendChild(this._picker);
        fragment.appendChild(this._calendar);

        this._self.appendChild(fragment);
    }

    createPicker () {
        const picker = document.createElement('div');
        
        picker.className = 'picker';
        picker.innerHTML = `
            <button class="btn prev"></button>
            <div class="year"></div>
            <div class="month"></div>
            <button class="btn next"></button>
        `;

        picker.addEventListener('click', e => {
            const btn = e.target.closest('button');

            if (! btn) return false;

            const currentDate = new Date(+this._currentDate);

            if (btn.className.indexOf('prev') != -1) {
                this.setDate(currentDate.setMonth(currentDate.getMonth() - 1));
            } else {
                this.setDate(currentDate.setMonth(currentDate.getMonth() + 1));
            }
        });

        return picker;
    }

    setPicker () {
        this._picker.querySelector('.year').innerText = this._currentDate.getFullYear();
        this._picker.querySelector('.month').innerText = this._currentDate.getMonth() + 1;
    }

    createCalendar () {
        const calendar = document.createElement('div');

        calendar.className = 'calendar';
        calendar.innerHTML = `
            <ul class="days">
                <li class="sun">일</li>
                <li>월</li>
                <li>화</li>
                <li>수</li>
                <li>목</li>
                <li>금</li>
                <li class="sat">토</li>
            </ul>
            <div class="dates"></div>
        `;

        return calendar;
    }

    drawCalendar () {
        const dates = document.querySelector('.dates');
        console.log(dates);
    }

    setDate (date = null) {
        if (date) this.currentDate = new Date(date);
    }
}

let sinceCalendar = new Calendar('since');
sinceCalendar.setDate('2020-05-01'); // Y-m-d
</script>